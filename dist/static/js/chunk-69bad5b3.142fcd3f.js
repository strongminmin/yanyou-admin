(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69bad5b3"],{"62a2":function(t,e,r){"use strict";var a=r("e00d"),n=r.n(a);n.a},e00d:function(t,e,r){},e781:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"edit"},[r("div",{staticClass:"edit-wrapper"},[t._v("\n    热点标签：\n    "),r("el-input",{staticClass:"edit-wrapper-input",model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}})],1),t._v(" "),r("div",{staticClass:"edit-wrapper"},[t._v("\n    热点来源：\n    "),r("el-input",{staticClass:"edit-wrapper-input",model:{value:t.origin,callback:function(e){t.origin=e},expression:"origin"}})],1),t._v(" "),r("div",{staticClass:"edit-wrapper"},[t._v("\n    热点标题：\n    "),r("el-input",{staticClass:"edit-wrapper-input",model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),r("div",{staticClass:"edit-wrapper"},[r("div",{staticClass:"upload-container"},[t.bannerUrl?t._e():r("el-upload",{staticClass:"image-uploader",attrs:{data:t.dataObj,multiple:!1,"show-file-list":!1,"on-success":t.handleBannerSuccess,drag:"",action:"https://httpbin.org/post"}},[r("i",{staticClass:"el-icon-upload"}),t._v(" "),r("div",{staticClass:"el-upload__text"},[t._v("\n          内容展示图：将文件拖到此处，或\n          "),r("em",[t._v("点击上传")])])]),t._v(" "),t.bannerUrl?r("div",{staticClass:"image-preview",style:{backgroundImage:"url("+t.bannerUrl+")"}},[r("div",{staticClass:"image-preview-action",on:{click:t.removeBanner}},[r("i",{staticClass:"el-icon-delete"})])]):t._e()],1)]),t._v(" "),r("div",{staticClass:"edit-tinymce-wrapper"},[r("div",{staticClass:"edit-tinymce"},[r("Tinymce",{ref:"editor",attrs:{width:700,height:400},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),t._v(" "),r("div",{staticClass:"edit-release-wrapper"},[r("el-button",{attrs:{type:"primary"},on:{click:t.advisoryHandler}},[t._v(t._s(t.btnTxt))])],1)])},n=[],i=(r("456d"),r("ac6a"),r("c5f6"),r("ee1d"),r("96cf"),r("3b8d")),s=r("8256"),o=r("ffff"),c={components:{Tinymce:s["a"]},data:function(){return{btnTxt:"发布",id:0,tag:"",title:"",origin:"",content:"",bannerUrl:"",dataObj:{token:"",key:""}}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$route.params.id,Number.isNaN(+e)){t.next=6;break}return this.id=e,t.next=5,this.fetchRequest(e);case 5:this.btnTxt="更新";case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{fetchRequest:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.prev=1,t.next=4,Object(o["b"])({advisory_id:e});case 4:a=t.sent,n=a.data,this.tag=n.data.advisory_tag,this.origin=n.data.advisory_source,this.title=n.data.advisory_title,this.content=n.data.advisory_content,this.bannerUrl=n.data.advisory_banner,r.close(),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),r.close(),this.$message.error("获取详情失败");case 18:case"end":return t.stop()}}),t,this,[[1,14]])})));function e(e){return t.apply(this,arguments)}return e}(),advisoryHandler:function(){0===this.id?this.relsaseAdvisory():this.upldaeAdvisory()},upldaeAdvisory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={advisory_id:this.id,advisory_tag:this.tag,advisory_title:this.title,advisory_source:this.origin,advisory_banner:this.bannerUrl,advisory_content:this.content},r=this.propsCheck(e),r){t.next=5;break}return this.$message.error("热点信息必须填写完整"),t.abrupt("return");case 5:return a=this.$loading({lock:!0,text:"更新中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.prev=6,t.next=9,Object(o["e"])(e);case 9:if(n=t.sent,i=n.data,1!==i.noerr){t.next=13;break}throw new Error;case 13:a.close(),this.$router.push("/advisory/advisory"),this.$message.success("更新成功"),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](6),a.close(),this.$message.error("更新失败");case 22:case"end":return t.stop()}}),t,this,[[6,18]])})));function e(){return t.apply(this,arguments)}return e}(),relsaseAdvisory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={advisory_tag:this.tag,advisory_title:this.title,advisory_source:this.origin,advisory_banner:this.bannerUrl,advisory_content:this.content},r=this.propsCheck(e),r){t.next=5;break}return this.$message.error("热点信息必须填写完整"),t.abrupt("return");case 5:return a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.prev=6,t.next=9,Object(o["d"])(e);case 9:if(n=t.sent,i=n.data,1!==i.noerr){t.next=13;break}throw new Error;case 13:a.close(),this.$message.success("发布成功"),this.$router.push("/advisory/advisory"),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](6),a.close(),this.$message.error("发布失败");case 22:case"end":return t.stop()}}),t,this,[[6,18]])})));function e(){return t.apply(this,arguments)}return e}(),handleBannerSuccess:function(t){var e=t.files.file;this.bannerUrl=e},removeBanner:function(){this.bannerUrl=""},propsCheck:function(t){var e=!0;return Object.keys(t).forEach((function(r){t[r]||(e=!1)})),e}}},d=c,u=(r("62a2"),r("2877")),l=Object(u["a"])(d,a,n,!1,null,"1c9c6221",null);e["default"]=l.exports},ffff:function(t,e,r){"use strict";r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return d}));var a=r("b775"),n=r("da71");function i(t){return Object(a["a"])({url:"".concat(n["a"].BASE_URL,"/advisory/release-advisory"),method:"post",data:t})}function s(t){return Object(a["a"])({url:"".concat(n["a"].BASE_URL,"/advisory/update-advisory"),method:"post",data:t})}function o(t){return Object(a["a"])({url:"".concat(n["a"].BASE_URL,"/advisory/advisory-list"),method:"get",params:t})}function c(t){return Object(a["a"])({url:"".concat(n["a"].BASE_URL,"/advisory/delete-advisory"),method:"get",params:t})}function d(t){return Object(a["a"])({url:"".concat(n["a"].BASE_URL,"/advisory/advisory-details"),method:"get",params:t})}}}]);