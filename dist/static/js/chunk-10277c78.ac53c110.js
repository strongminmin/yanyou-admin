(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10277c78"],{3556:function(e,t,r){"use strict";var a=r("5191"),n=r.n(a);n.a},"456d":function(e,t,r){var a=r("4bf8"),n=r("0d58");r("5eda")("keys",(function(){return function(e){return n(a(e))}}))},5191:function(e,t,r){},"5eda":function(e,t,r){var a=r("5ca1"),n=r("8378"),o=r("79e5");e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],i={};i[e]=t(r),a(a.S+a.F*o((function(){r(1)})),"Object",i)}},be63:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resource-container"},[r("div",{staticClass:"resource-add"},[r("el-button",{attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("\n      上传\n      "),r("el-dialog",{attrs:{title:"资料上传",visible:e.dialogVisible,"before-close":e.handleClose,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.ruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"科目",prop:"type"}},[r("el-input",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"链接",prop:"url"}},[r("el-input",{model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密钥",prop:"ident"}},[r("el-input",{model:{value:e.ruleForm.ident,callback:function(t){e.$set(e.ruleForm,"ident",t)},expression:"ruleForm.ident"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.requestCallback}},[e._v("上传")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"resource-table"},[r("resource-table",{attrs:{"table-data":e.tableData},on:{delete:e.refreshCallback,upload:e.uploadCallback}})],1)])},n=[],o=(r("456d"),r("ac6a"),r("96cf"),r("3b8d")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"stripe",border:"border"}},[r("el-table-column",{attrs:{type:"index",label:"编号",width:"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"resource_type",label:"科目",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"resource_title",label:"标题",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"resource_url",label:"链接",align:"center",width:"500"}}),e._v(" "),r("el-table-column",{attrs:{prop:"resource_ident",label:"密钥",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.uploadRow(t.$index,e.tableData)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"删除资源",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("span",[e._v("是否删除")]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.deleteCallback}},[e._v("确 定")])],1)])],1)},s=[],l=r("b775"),c=r("da71");function u(e){return Object(l["a"])({url:"".concat(c["a"].BASE_URL,"/resource/release-resource"),method:"post",data:e})}function d(e){return Object(l["a"])({url:"".concat(c["a"].BASE_URL,"/resource/update-resource"),method:"post",data:e})}function p(e){return Object(l["a"])({url:"".concat(c["a"].BASE_URL,"/resource/resource-list"),method:"get",params:e})}function h(e){return Object(l["a"])({url:"".concat(c["a"].BASE_URL,"/resource/delete-resource"),method:"get",params:e})}var b="delete",f="upload",m={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{currentIdx:"",dialogVisible:!1,stripe:!0,border:!0}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},deleteCallback:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteRequest();case 2:this.closeDialog();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteRow:function(e,t){this.currentIdx=e,this.openDialog()},deleteRequest:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"删除中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.prev=1,e.next=4,h({resource_id:this.tableData[this.currentIdx].resource_id});case 4:if(r=e.sent,a=r.data,console.log(a),1!==a.noerr){e.next=9;break}throw new Error;case 9:t.close(),this.$message.success("删除成功"),this.$emit(b),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](1),t.close(),this.$message.error("删除失败");case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(){return e.apply(this,arguments)}return t}(),uploadRow:function(e){this.$emit(f,e)}}},g=m,v=r("2877"),_=Object(v["a"])(g,i,s,!1,null,null,null),k=_.exports,w={name:"Resource",components:{ResourceTable:k},data:function(){return{id:0,btnTxt:"上传",ruleForm:{type:"",title:"",url:"",ident:""},dialogVisible:!1,tableData:[]}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getResourceList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){var e=this;this.dialogVisible=!1,Object.keys(this.ruleForm).forEach((function(t){e.ruleForm[t]=""}))},requestCallback:function(){0===this.id?this.releaseResource():this.updateResource()},uploadCallback:function(e){this.ruleForm.type=this.tableData[e].resource_type,this.ruleForm.title=this.tableData[e].resource_title,this.ruleForm.url=this.tableData[e].resource_url,this.ruleForm.ident=this.tableData[e].resource_ident,this.id=this.tableData[e].resource_id,this.openDialog()},updateResource:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.prev=1,e.next=4,d({resource_id:this.id,resource_type:this.ruleForm.type,resource_title:this.ruleForm.title,resource_url:this.ruleForm.url,resource_ident:this.ruleForm.ident});case 4:if(r=e.sent,a=r.data,1!==a.noerr){e.next=8;break}throw new Error;case 8:this.getResourceList(),this.$message.success("更新成功"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),this.$message.error("更新失败");case 15:return e.prev=15,this.closeDialog(),t.close(),this.id=0,e.finish(15);case 20:case"end":return e.stop()}}),e,this,[[1,12,15,20]])})));function t(){return e.apply(this,arguments)}return t}(),releaseResource:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.prev=1,e.next=4,u({resource_type:this.ruleForm.type,resource_title:this.ruleForm.title,resource_url:this.ruleForm.url,resource_ident:this.ruleForm.ident});case 4:if(r=e.sent,a=r.data,console.log(a),1!==a.noerr){e.next=9;break}throw new Error;case 9:this.$message.success("上传成功"),this.getResourceList(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),this.$message.error("上传失败");case 16:return e.prev=16,this.closeDialog(),t.close(),this.id=0,e.finish(16);case 21:case"end":return e.stop()}}),e,this,[[1,13,16,21]])})));function t(){return e.apply(this,arguments)}return t}(),getResourceList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.prev=1,e.next=4,p();case 4:if(r=e.sent,a=r.data,1!==a.noerr){e.next=8;break}throw new Error;case 8:n=Object.keys(a.data).reduce((function(e,t){return e.concat(a.data[t])}),[]),this.tableData=n,t.close(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](1),t.close(),this.$message.error("网络请求失败");case 17:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(){return e.apply(this,arguments)}return t}(),refreshCallback:function(){this.getResourceList()},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(r){t.id=0,Object.keys(t.ruleForm).forEach((function(e){console.log(t.ruleForm[e]),t.ruleForm[e]=""})),e()})).catch((function(e){}))}}},x=w,y=(r("3556"),Object(v["a"])(x,a,n,!1,null,"6b7d35b7",null));t["default"]=y.exports}}]);